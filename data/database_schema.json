{
  "database": {
    "name": "FollowTheTone",
    "namespace": "gear",
    "database": "guitars",
    "description": "Guitar database schema for FollowTheTone application"
  },
  "tables": {
    "guitars": {
      "type": "main_table",
      "description": "Core guitar records",
      "fields": {
        "id": {
          "type": "record_id",
          "required": true,
          "description": "Unique record identifier"
        },
        "brand": {
          "type": "string",
          "required": true,
          "description": "Guitar brand name"
        },
        "model": {
          "type": "string",
          "required": true,
          "description": "Guitar model name"
        },
        "line": {
          "type": "string",
          "required": false,
          "description": "Guitar line/series"
        },
        "variant": {
          "type": "string",
          "required": false,
          "description": "Model variant"
        },
        "year_reference": {
          "type": "string",
          "required": false,
          "description": "Year or era reference"
        },
        "body_style": {
          "type": "string",
          "required": false,
          "description": "Body style description"
        },
        "weight": {
          "type": "string",
          "required": false,
          "description": "Guitar weight"
        },
        "created_at": {
          "type": "datetime",
          "required": true,
          "auto_generated": true,
          "description": "Record creation timestamp"
        },
        "updated_at": {
          "type": "datetime",
          "required": true,
          "auto_generated": true,
          "description": "Record last update timestamp"
        }
      },
      "indexes": [
        {
          "name": "idx_guitars_brand_model",
          "columns": ["brand", "model"],
          "unique": true,
          "description": "Ensures unique brand/model combinations"
        }
      ],
      "events": [
        {
          "name": "guitars_touch",
          "trigger": "UPDATE",
          "action": "UPDATE $after SET updated_at = time::now()",
          "description": "Automatically updates timestamp on record changes"
        }
      ]
    },
    "guitar_dimensions": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Physical dimensions and specifications",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "scale_length": {
          "type": "string",
          "required": false,
          "description": "Scale length measurement",
          "aliases": ["scale", "scale_length"]
        },
        "nut_width": {
          "type": "string",
          "required": false,
          "description": "Nut width measurement",
          "aliases": ["nut_width"]
        },
        "neck_profile": {
          "type": "string",
          "required": false,
          "description": "Neck profile shape",
          "aliases": ["shape", "neck_shape"]
        },
        "neck_thickness_1st": {
          "type": "string",
          "required": false,
          "description": "Neck thickness at 1st fret"
        },
        "neck_thickness_12th": {
          "type": "string",
          "required": false,
          "description": "Neck thickness at 12th fret"
        },
        "fingerboard_radius": {
          "type": "string",
          "required": false,
          "description": "Fingerboard radius",
          "aliases": ["radius", "fretboard_radius"]
        },
        "fret_count": {
          "type": "number",
          "required": false,
          "description": "Number of frets",
          "aliases": ["frets"]
        },
        "fret_type": {
          "type": "string",
          "required": false,
          "description": "Fretwire specification",
          "aliases": ["fretwire"]
        },
        "binding": {
          "type": "string",
          "required": false,
          "description": "Binding details"
        }
      },
      "indexes": [
        {
          "name": "uniq_dimensions_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one dimension record per guitar"
        }
      ]
    },
    "guitar_appointments": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Decorative appointments and trim",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "binding_body": {
          "type": "string",
          "required": false,
          "description": "Body binding details"
        },
        "binding_fingerboard": {
          "type": "string",
          "required": false,
          "description": "Fingerboard binding details"
        },
        "inlays": {
          "type": "string",
          "required": false,
          "description": "Fingerboard inlay details",
          "aliases": ["inlay"]
        },
        "headstock_veneer": {
          "type": "string",
          "required": false,
          "description": "Headstock veneer details"
        },
        "other": {
          "type": "string",
          "required": false,
          "description": "Other appointment details"
        }
      },
      "indexes": [
        {
          "name": "uniq_appointments_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one appointment record per guitar"
        }
      ]
    },
    "guitar_woods": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Wood materials used in construction",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "top": {
          "type": "string",
          "required": false,
          "description": "Top wood material"
        },
        "body": {
          "type": "string",
          "required": false,
          "description": "Body wood material"
        },
        "neck": {
          "type": "string",
          "required": false,
          "description": "Neck wood material"
        },
        "fingerboard": {
          "type": "string",
          "required": false,
          "description": "Fingerboard wood material",
          "aliases": ["fretboard"]
        },
        "neck_joint": {
          "type": "string",
          "required": false,
          "description": "Neck joint construction"
        },
        "top_carve": {
          "type": "string",
          "required": false,
          "description": "Top carving details"
        }
      },
      "indexes": [
        {
          "name": "uniq_woods_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one wood record per guitar"
        }
      ]
    },
    "guitar_finish": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Finish and color information",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "color": {
          "type": "string",
          "required": false,
          "description": "Primary finish color"
        },
        "type": {
          "type": "string",
          "required": false,
          "description": "Finish type (e.g., nitrocellulose, polyurethane)",
          "aliases": ["finish", "finish_type"]
        },
        "aging": {
          "type": "string",
          "required": false,
          "description": "Aging or relic details",
          "aliases": ["relic", "aging"]
        },
        "colors": {
          "type": "array<string>",
          "required": false,
          "description": "Multiple finish colors"
        },
        "notes": {
          "type": "string",
          "required": false,
          "description": "Additional finish notes"
        }
      },
      "indexes": [
        {
          "name": "uniq_finish_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one finish record per guitar"
        }
      ]
    },
    "guitar_hardware": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Hardware components and materials",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "material": {
          "type": "string",
          "required": false,
          "description": "Hardware material"
        },
        "bridge": {
          "type": "string",
          "required": false,
          "description": "Bridge type and details"
        },
        "tailpiece": {
          "type": "string",
          "required": false,
          "description": "Tailpiece details"
        },
        "tuners": {
          "type": "string",
          "required": false,
          "description": "Tuning machine details",
          "aliases": ["tuning_machines"]
        },
        "pickguard": {
          "type": "string",
          "required": false,
          "description": "Pickguard details"
        },
        "pickup_rings": {
          "type": "string",
          "required": false,
          "description": "Pickup ring details"
        },
        "notes": {
          "type": "string",
          "required": false,
          "description": "Additional hardware notes"
        }
      },
      "indexes": [
        {
          "name": "uniq_hardware_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one hardware record per guitar"
        }
      ]
    },
    "guitar_setup": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Setup and configuration details",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "strings": {
          "type": "string",
          "required": false,
          "description": "String type and gauge",
          "aliases": ["strings_and_setup"]
        },
        "tuning": {
          "type": "string",
          "required": false,
          "description": "Standard tuning"
        },
        "action": {
          "type": "string",
          "required": false,
          "description": "String action height"
        },
        "nut_material": {
          "type": "string",
          "required": false,
          "description": "Nut material"
        },
        "truss_rod": {
          "type": "string",
          "required": false,
          "description": "Truss rod details",
          "aliases": ["truss rod"]
        }
      },
      "indexes": [
        {
          "name": "uniq_setup_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one setup record per guitar"
        }
      ]
    },
    "guitar_case": {
      "type": "one_to_one",
      "parent": "guitars",
      "description": "Case and certificate information",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "type": {
          "type": "string",
          "required": false,
          "description": "Case type"
        },
        "coa_included": {
          "type": "boolean",
          "required": false,
          "description": "Certificate of authenticity included"
        },
        "notes": {
          "type": "string",
          "required": false,
          "description": "Additional case notes"
        }
      },
      "indexes": [
        {
          "name": "uniq_case_guitar",
          "columns": ["guitar_id"],
          "unique": true,
          "description": "Ensures one case record per guitar"
        }
      ]
    },
    "guitar_pickups": {
      "type": "one_to_many",
      "parent": "guitars",
      "description": "Pickup specifications (multiple per guitar)",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "position": {
          "type": "string",
          "required": false,
          "description": "Pickup position (bridge, neck, middle)"
        },
        "type": {
          "type": "string",
          "required": false,
          "description": "Pickup type"
        },
        "model": {
          "type": "string",
          "required": false,
          "description": "Pickup model"
        },
        "winding": {
          "type": "string",
          "required": false,
          "description": "Winding specifications"
        }
      },
      "indexes": [
        {
          "name": "idx_pickups_guitar",
          "columns": ["guitar_id"],
          "unique": false,
          "description": "Index for guitar pickup lookups"
        }
      ]
    },
    "guitar_controls": {
      "type": "one_to_many",
      "parent": "guitars",
      "description": "Control specifications (multiple per guitar)",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "name": {
          "type": "string",
          "required": true,
          "description": "Control name (volume, tone, switch)"
        },
        "detail": {
          "type": "string",
          "required": false,
          "description": "Control details"
        }
      },
      "indexes": [
        {
          "name": "idx_controls_guitar",
          "columns": ["guitar_id"],
          "unique": false,
          "description": "Index for guitar control lookups"
        }
      ]
    },
    "guitar_badges": {
      "type": "one_to_many",
      "parent": "guitars",
      "description": "Badge information (multiple per guitar)",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "badge": {
          "type": "string",
          "required": true,
          "description": "Badge text"
        }
      },
      "indexes": [
        {
          "name": "guitar_badges_guitar_idx",
          "columns": ["guitar_id"],
          "unique": false,
          "description": "Index for guitar badge lookups"
        }
      ]
    },
    "guitar_provenance": {
      "type": "one_to_many",
      "parent": "guitars",
      "description": "Provenance and history (multiple per guitar)",
      "fields": {
        "guitar_id": {
          "type": "record<guitars>",
          "required": true,
          "description": "Foreign key to guitars table"
        },
        "note": {
          "type": "string",
          "required": false,
          "description": "Provenance note"
        },
        "url": {
          "type": "string",
          "required": false,
          "description": "Related URL"
        }
      },
      "indexes": [
        {
          "name": "guitar_provenance_guitar_idx",
          "columns": ["guitar_id"],
          "unique": false,
          "description": "Index for guitar provenance lookups"
        }
      ]
    }
  },
  "relationships": {
    "one_to_one": [
      "guitar_dimensions",
      "guitar_appointments",
      "guitar_woods",
      "guitar_finish",
      "guitar_hardware",
      "guitar_setup",
      "guitar_case"
    ],
    "one_to_many": [
      "guitar_pickups",
      "guitar_controls",
      "guitar_badges",
      "guitar_provenance"
    ]
  },
  "constraints": {
    "unique_combinations": [
      {
        "table": "guitars",
        "fields": ["brand", "model"],
        "description": "Each brand/model combination must be unique"
      }
    ],
    "foreign_keys": [
      {
        "table": "guitar_dimensions",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_appointments",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_woods",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_finish",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_hardware",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_setup",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_case",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_pickups",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_controls",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_badges",
        "field": "guitar_id",
        "references": "guitars.id"
      },
      {
        "table": "guitar_provenance",
        "field": "guitar_id",
        "references": "guitars.id"
      }
    ]
  }
}
